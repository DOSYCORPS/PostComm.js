// PostComm.js
// https://github.com/dwighthouse/PostComm.js
// 
// Under MIT License
// Copyright (c) 2013 Dwight House
// 
// Colossians 3:23-24

// Compressed with Uglify2
// http://lisperator.net/uglifyjs/

!function(n){"use strict"
function t(n,t){var e,r,o=n.length
for(e=0;o>e;e+=1)if(r=n[e],t(r,e))return r}function e(n,t,e){n[t]=n.hasOwnProperty(t)?n[t]:e}function r(n){return/^https?:\/\//.test(n)}function o(n){return n&&n.window&&n===n.window}function i(){}function u(n){var t=n.indexOf("//")+2,e=n.indexOf("/",t)
return-1!==e?n.substr(0,e):n}function c(){return n.opener||n.parent}function f(){var t=(n.document||{}).referrer
return t?u(t):[].u}function s(n,e){var r=W[n]||[]
return t(r,function(n){return n.getContentWindow()===e})}function a(n){var t=s(n.origin,n.source)
t&&t.getMessageHandler()(n.data,t)}function d(){E(n,"message",a)}function g(){O(n,"message",a)}function m(n){var t=n.getOrigin()
return e(W,t,[]),W[t].push(n),n}function v(n){var e=n.getOrigin(),r=n.getContentWindow(),o=W[e]||[]
t(o,function(n,t){return n.getContentWindow()===r?(o.splice(t,1),!0):void 0}),0===o.length&&delete W[e]}function C(n){return n.getOrigin=i,n.getContentWindow=i,n.getMessageHandler=function(){return i},n.isValid=function(){return!1},n.sendMessage=i,n.destroy=i,n}function p(n,t,e){var i=s(n,t),u=r(n)&&o(t),c={}
return i?i:(u&&(c={getOrigin:function(){return n},getContentWindow:function(){return t},getMessageHandler:function(){return e},isValid:function(){return u},sendMessage:function(e){t.postMessage(e,n)},destroy:function(){v(c),C(c)}}),u?m(c):C(c))}function l(n,t){var e=u(n.src)
return p(e,n.contentWindow,t)}function w(n){return p(f(),c(),n)}function h(){return n.postComm=M,y}var E,O,M=n.postComm,W={},y={}
E=function(){return n.addEventListener?function(n,t,e){n.addEventListener(t,e,!1)}:n.attachEvent?function(n,t,e){n.attachEvent("on"+t,e)}:function(n,t,e){n["on"+t]=e}}(),O=function(){return n.removeEventListener?function(n,t,e){n.removeEventListener(t,e,!1)}:n.detachEvent?function(n,t,e){n.detachEvent("on"+t,e)}:function(n,t){n["on"+t]=[].u}}(),y.convertUrlToOrigin=u,y.findComm=s,y.engage=d,y.disengage=g,y.createComm=p,y.createIframeComm=l,y.createParentComm=w,y.noConflict=h,n.postMessage&&(n.postComm=y,d(),"function"==typeof n.define&&n.define.amd&&n.define("postComm",[],function(){return y}))}(this)